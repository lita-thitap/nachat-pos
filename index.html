<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ณฉัตร | Nachat – POS</title>
  <style>
  /* ====== Nachat – POS: Black&White Minimal (ตามภาพ) ====== */
  :root{
    --page:#f5f6f7;
    --panel:#ffffff;
    --raised:#fafafa;
    --line:#e9e9e9;
    --fg:#111111;
    --muted:#777777;
    --black:#111111;
  }

  *{box-sizing:border-box}
  html,body{
    margin:0;padding:0;
    background:var(--page);
    color:var(--fg);
    font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif;
  }

  /* ---------- Header ---------- */
  header{
    display:flex;align-items:center;gap:14px;
    padding:18px 18px;
    position:sticky;top:0;z-index:5;
    color:#fff;
    background:linear-gradient(180deg,#1c1c1f 0%, #2a2b2e 100%);
    border-bottom:1px solid #242526;
  }
  header .brand{display:flex;align-items:center;gap:12px}
  header h1{margin:0;font-size:18px;font-weight:800;color:#fff}
  header img{width:34px;height:34px;border-radius:50%}
  .tag{font-size:12px;padding:4px 8px;border-radius:10px;border:1px solid #3a3a3a;color:#e7e7e7}

  /* ---------- Layout ---------- */
  .wrap{max-width:1200px;margin:22px auto;padding:0 16px}

  /* Tabs */
  .tabs{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:14px}
  .tab{
    padding:10px 16px;border-radius:14px;cursor:pointer;
    background:#fff;border:1.5px solid var(--black);color:var(--black);
  }
  .tab.active{background:var(--black);color:#fff;outline:none}

  /* Sub tabs */
  .subtabs{display:flex;gap:8px;margin-bottom:12px}
  .subtab{
    padding:8px 12px;border-radius:10px;cursor:pointer;
    background:#fff;border:1.5px solid var(--black);color:var(--black)
  }
  .subtab.active{background:var(--black);color:#fff;outline:none}

  /* ---------- Card/Panel ---------- */
  .card{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:18px;
    padding:14px;
    box-shadow:0 2px 10px rgba(0,0,0,.04);
  }
  .card h3{margin:0 0 10px;font-size:15px;font-weight:800}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
  .row{display:flex;gap:10px;align-items:center}
  .row>*{flex:1}
  .right{display:flex;justify-content:flex-end}
  .space{height:12px}
  .muted{color:var(--muted)}

  /* ---------- Controls / Inputs / Buttons ---------- */
  input,select{
    width:100%;
    background:#fff;color:var(--fg);
    border:1.5px solid #cfcfcf;
    padding:10px 12px;border-radius:12px;
    outline:none;
  }
  input::placeholder,select:has(option[value=""]:checked){color:#a8a8a8}

  .btn{
    padding:10px 14px;border-radius:12px;cursor:pointer;
    border:1.5px solid var(--black);background:#fff;color:var(--black);
  }
  .btn.primary{background:var(--black);color:#fff;border-color:var(--black)}
  .btn.ghost{background:transparent;border-color:#d3d3d3;color:var(--fg)}
  .btn.danger{background:#fff;border-color:var(--black);color:var(--black)}

  table{width:100%;border-collapse:collapse}
  th,td{padding:10px 8px;border-bottom:1px dashed var(--line);text-align:left}
  tfoot td{font-weight:800}

  .notice{background:var(--raised);color:#333;border:1px solid var(--line);padding:10px;border-radius:12px}

  /* ---------- ปุ่มเมนูอาหาร ---------- */
  #menuPanels .card button,
  #menuPanels .card .btn,
  #menuPanels .card .item,
  #menuPanels .card .chip{
    display:block;width:100%;
    text-align:center;
    background:var(--black);color:#fff;
    border:0;border-radius:14px;
    padding:16px 12px;
    font-weight:500;
  }
  #menuPanels .card{background:#fff;border-color:#eee}
  .pill{padding:6px 10px;border-radius:999px;border:1.5px solid var(--black);background:#fff;color:var(--black)}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="https://lita-thitap.github.io/nachat-pos/LOGO.png" alt="logo"/>
      <h1>ณฉัตร | Nachat – POS</h1>
    </div>
    <span class="tag" id="syncState">offline</span>
  </header>

  <div class="wrap">
    <div class="tabs">
      <button class="tab active" data-tab="#pos">รับออเดอร์</button>
      <button class="tab" data-tab="#open">โต๊ะ/บิล</button>
      <button class="tab" data-tab="#reports">รายงานขาย</button>
      <button class="tab" data-tab="#settings">ตั้งค่าร้าน</button>
    </div>

    <!-- POS TAB -->
    <section id="pos" class="tabpane">
      <div class="card">
        <div class="row">
          <div><label class="muted">โต๊ะ</label><input id="inpTable" placeholder="เช่น N1"/></div>
          <div><label class="muted">พนักงาน</label><input id="inpStaff" placeholder="เช่น น้ำชา"/></div>
          <div style="max-width:160px;align-self:end"><button class="btn primary" id="btnOpenBill">เปิดบิล</button></div>
        </div>
      </div>

      <div class="space"></div>
      <div id="menuPanels" class="grid"><!-- auto render --></div>

      <div class="space"></div>
      <div class="card">
        <h3>ตะกร้า</h3>
        <div id="cartList" class="muted">ยังไม่มีรายการ</div>
        <div class="row" style="margin-top:6px">
          <div class="pill">รวม: <b id="cartTotal">0</b> บาท</div>
          <div class="right" style="flex:1; gap:8px">
            <button class="btn ghost" id="btnClearCart">ล้างตะกร้า</button>
            <button class="btn primary" id="btnAddToBill">เพิ่มลงบิลปัจจุบัน</button>
          </div>
        </div>
      </div>
    </section>

    <!-- OPEN BILLS TAB -->
    <section id="open" class="tabpane" hidden>
      <div class="card"><h3>บิลที่เปิดอยู่</h3><div id="openBills"></div></div>
    </section>

    <!-- REPORTS TAB -->
    <section id="reports" class="tabpane" hidden>
      <div class="card">
        <h3>สรุปรายงาน</h3>
        <div class="row"><button class="btn" id="btnToday">วันนี้</button><button class="btn" id="btnMonth">เดือนนี้</button><button class="btn" id="btnPullNow">ดึงจากคลาวด์ทันที</button></div>
        <div class="space"></div>
        <div id="reportBox" class="muted">ยังไม่มีข้อมูล</div>
      </div>
    </section>

    <!-- SETTINGS TAB -->
    <section id="settings" class="tabpane" hidden>
      <div class="subtabs">
        <button class="subtab active" data-sub="#menuSet">ตั้งค่าเมนู</button>
        <button class="subtab" data-sub="#cloudSet">เชื่อมต่อ Google Sheets</button>
      </div>

      <!-- ตั้งค่าเมนู -->
      <div id="menuSet" class="subpane">
        <div class="card">
          <h3>ตั้งค่าเมนู (จัดตามหมวด)</h3>
          <div class="row" style="gap:8px;margin-bottom:8px">
            <input id="menuSearch" placeholder="กรองตามชื่อ"/>
            <select id="menuFilter">
              <option value="">ทุกหมวด</option>
              <option value="SET">ชุดหมูกระทะ</option>
              <option value="AD">Add-on</option>
              <option value="DW">เครื่องดื่ม</option>
              <option value="PR">โปรโมชันเครื่องดื่ม</option>
            </select>
          </div>
          <div class="row" style="gap:8px;margin-bottom:8px">
            <input id="newName" placeholder="ชื่อเมนูใหม่เร็วๆ"/>
            <input id="newPrice" type="number" placeholder="ราคา" style="max-width:140px"/>
            <select id="newCat" style="max-width:220px">
              <option value="SET">ชุดหมูกระทะ</option>
              <option value="AD">Add-on</option>
              <option value="DW">เครื่องดื่ม</option>
              <option value="PR">โปรโมชันเครื่องดื่ม</option>
            </select>
            <input id="newCode" class="col-code" placeholder="รหัส (เช่น Z99)"/>
            <button class="btn primary" id="btnAddMenu">เพิ่ม</button>
          </div>
          <div id="menuTableBox" class="mini muted">กำลังโหลด…</div>
        </div>
      </div>

      <!-- เชื่อมต่อคลาวด์ -->
      <div id="cloudSet" class="subpane" hidden>
        <div class="card">
          <h3>เชื่อมยอดขายไปยัง Google Sheets (Apps Script)</h3>
          <div class="notice">วาง <b>Web App URL</b> ที่ลงท้าย <code>/exec</code></div>
          <div class="space"></div>
          <div class="row">
            <input id="inpWebAppUrl" placeholder="https://script.google.com/macros/s/.../exec" />
            <button class="btn" id="btnSaveUrl">บันทึก</button>
            <button class="btn" id="btnTest">ทดสอบเชื่อมต่อ</button>
          </div>
          <div id="gsStatus" class="muted" style="margin-top:8px"></div>
          <div class="space"></div>
          <div class="row"><button class="btn danger" id="btnClearLocal">ล้างข้อมูลเครื่องนี้</button></div>
        </div>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
  <script src="sync.js"></script>
  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active')); btn.classList.add('active');
        document.querySelectorAll('.tabpane').forEach(p=>p.hidden=true); document.querySelector(btn.dataset.tab).hidden=false;
      });
    });
    // Subtabs
    document.querySelectorAll('.subtab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.subtab').forEach(b=>b.classList.remove('active')); btn.classList.add('active');
        document.querySelectorAll('.subpane').forEach(p=>p.hidden=true); document.querySelector(btn.dataset.sub).hidden=false;
      });
    });
  </script>
</body>
</html>
