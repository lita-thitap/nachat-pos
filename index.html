<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nachat – POS</title>
  <style>
    :root{
      --black:#111;
      --muted:#6b6b6b;
      --line:#e8e8e8;
      --bg:#0c0c0c;
      --panel:#ffffff;
      --raised:#fafafa;
      --danger:#b00020;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:#111;font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{max-width:1100px;margin:0 auto;padding:0 16px}

    /* Header */
    header{background:linear-gradient(#242424,#171717);color:#fff;border-bottom:1px solid #000}
    .header-inner{display:flex;flex-direction:column;align-items:center;gap:6px;padding:22px 0}
    .title{display:flex;align-items:center;gap:12px}
    .title img{height:60px;width:auto}
    .title h1{margin:0;font-size:26px;font-weight:800}
    .sub{opacity:.9}

    /* Tabs + buttons */
    .tabs{display:flex;gap:10px;flex-wrap:wrap;padding:14px 0}
    .tab{padding:10px 14px;border-radius:12px;border:1.4px solid var(--black);background:#fff;cursor:pointer}
    .tab.active{background:var(--raised);outline:2px solid #000}

    .btn{padding:9px 12px;border-radius:12px;border:1.4px solid var(--black);background:#fff;cursor:pointer}
    .btn.primary{background:#111;color:#fff;border-color:#111}
    .btn.ghost{background:transparent}
    .btn.danger{border-color:var(--danger);color:#fff;background:var(--danger)}
    .row{display:flex;gap:12px;align-items:center}
    .right{display:flex;justify-content:flex-end}
    .space{height:10px}

    input,select{background:#fff;border:1.4px solid var(--black);color:#111;padding:9px 10px;border-radius:12px;width:100%}
    label.muted{color:var(--muted);font-size:12px}

    /* Cards/Grids */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
    .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:12px}
    .card h3{margin:0 0 8px;font-size:15px}
    .pill{padding:6px 10px;border-radius:999px;border:1.5px solid var(--black);background:#fff;color:#111}

    /* Menu button */
    .menu-btn{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:12px;border:1.4px solid var(--black);background:#fff;cursor:pointer}
    .menu-btn .name{font-weight:600}
    .menu-btn .price{border:1px solid var(--black);border-radius:999px;padding:2px 8px}

    /* Table bills */
    .bill-row{display:flex;gap:12px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:10px 12px;background:#fff}
    .bill-title{flex:1}
    .bill-actions{display:flex;gap:8px;flex-wrap:wrap}

    /* Pay modal */
    dialog{border:none;border-radius:16px;padding:0;max-width:720px;width:95%}
    dialog::backdrop{background:rgba(0,0,0,.45)}
    dialog .card{border:none}
    .items-box{max-height:240px;overflow:auto;border:1px dashed var(--line);border-radius:12px;background:#fcfcfc;padding:8px}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px dashed var(--line);padding:8px;text-align:left}
    tfoot td{font-weight:700}
    .qr-panel{display:flex;gap:14px;align-items:center;margin-top:8px;padding:10px;border:1px dashed var(--line);border-radius:12px;background:#f8f8f8}
    .hint{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap header-inner">
      <div class="title">
        <img src="LOGO NACHAT.png" alt="Nachat Logo" />
        <h1>ณฉัตร | Nachat – POS</h1>
      </div>
      <div class="sub">หมูกระทะชุดละ 299 + Add-on & เครื่องดื่ม | สรุปยอดขายรายวัน / สัปดาห์ / เดือน</div>
    </div>
  </header>

  <div class="wrap">
    <div class="tabs">
      <button class="tab active" data-tab="#pos">รับออเดอร์</button>
      <button class="tab" data-tab="#open">โต๊ะ/บิล</button>
      <button class="tab" data-tab="#reports">รายงานขาย</button>
      <button class="tab" data-tab="#settings">ตั้งค่าร้าน</button>
    </div>

    <!-- POS -->
    <section id="pos" class="tabpane">
      <div class="card">
        <div class="row">
          <div><label class="muted">โต๊ะ</label><input id="inpTable" placeholder="เช่น N1" /></div>
          <div><label class="muted">พนักงาน</label><input id="inpStaff" placeholder="เช่น Koch" /></div>
          <div style="max-width:160px;align-self:end"><button class="btn primary" id="btnOpenBill">เปิดบิล</button></div>
        </div>
      </div>

      <div class="space"></div>
      <div id="menuPanels" class="grid"><!-- render เมนู --></div>

      <div class="space"></div>
      <div class="card">
        <h3>ตะกร้า</h3>
        <div id="cartList" class="hint">ยังไม่มีรายการ</div>
        <div class="row" style="margin-top:6px">
          <div class="pill">รวม: <b id="cartTotal">0</b> บาท</div>
          <div class="right" style="flex:1;gap:8px">
            <button class="btn" id="btnClearCart">ล้างตะกร้า</button>
            <button class="btn primary" id="btnAddToBill">เพิ่มลงบิลปัจจุบัน</button>
          </div>
        </div>
      </div>
    </section>

    <!-- OPEN BILLS -->
    <section id="open" class="tabpane" hidden>
      <div class="card">
        <h3>บิลที่เปิดอยู่</h3>
        <div id="openBills"></div>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="reports" class="tabpane" hidden>
      <div class="card">
        <h3>สรุปรายงาน</h3>
        <div class="row" style="gap:8px">
          <button class="btn" id="btnToday">วันนี้</button>
          <button class="btn" id="btnMonth">เดือนนี้</button>
          <button class="btn" id="btnPullNow">ดึงจากคลาวด์ทันที</button>
        </div>
        <div class="space"></div>
        <div id="reportBox" class="hint">ยังไม่มีข้อมูล</div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settings" class="tabpane" hidden>
      <div class="card">
        <h3>ตั้งค่าเมนู (ตัวอย่าง)</h3>
        <div class="hint">ตัวอย่างเมนูถูกฝังในโค้ดที่ <code>DEFAULT_MENU</code> (ไฟล์ app.js) คุณสามารถเชื่อมหน้า “ตั้งค่าเมนู” ที่ทำไว้เดิมต่อได้</div>
      </div>
    </section>
  </div>

  <!-- Pay modal -->
  <dialog id="payModal">
    <form method="dialog" class="card" style="border:none">
      <h3>ปิดบิล</h3>

      <div class="row">
        <div><label class="muted">โต๊ะ</label><input id="payTable" readonly /></div>
        <div><label class="muted">พนักงาน</label><input id="payStaff" readonly /></div>
        <div><label class="muted">ยอดรวม</label><input id="payTotal" readonly /></div>
      </div>

      <div style="height:8px"></div>
      <div class="items-box">
        <table id="payItems"></table>
      </div>

      <div style="height:8px"></div>
      <div class="row">
        <div style="max-width:220px">
          <label class="muted">วิธีชำระ</label>
          <select id="payMethod">
            <option value="cash">เงินสด (Cash)</option>
            <option value="scan">สแกนจ่าย (Scan)</option>
          </select>
        </div>
        <div>
          <label class="muted">รับเงินมา (บาท)</label>
          <input id="payReceived" type="number" />
        </div>
        <div>
          <label class="muted">เงินทอน</label>
          <input id="payChange" readonly />
        </div>
      </div>

      <!-- QR zone -->
      <div id="qrZone" class="qr-panel" hidden>
        <img id="qrImg" alt="QR" style="width:220px;height:220px;border:1px solid #eee;border-radius:12px;background:#fff" />
        <div>
          <div class="hint">สแกนจ่ายได้เลย</div>
          <div id="qrNote" class="hint" style="margin-top:6px"></div>
        </div>
      </div>

      <div class="right" style="gap:8px;margin-top:10px">
        <button class="btn" value="cancel">ยกเลิก</button>
        <button id="btnConfirmPay" class="btn primary" value="ok">ปิดบิล</button>
      </div>
    </form>
  </dialog>

  <script src="app.js"></script>
  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tabpane').forEach(p=>p.hidden=true);
        document.querySelector(btn.dataset.tab).hidden=false;
      });
    });
  </script>
</body>
</html>
