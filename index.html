<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nachat POS</title>
  <style>
    /* ===== Theme — คงโทนเดิม (ดำ/ขาวมินิมอล) ===== */
    :root{
      --bg:#111;            /* พื้นหลังหลัก */
      --panel:#fff;         /* กล่อง/การ์ด */
      --ink:#111;           /* ตัวอักษรเข้ม */
      --muted:#6b6b6b;      /* ตัวอักษรจาง */
      --line:#eaeaea;       /* เส้นขอบ */
      --accent:#111;        /* ปุ่มหลัก */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
      font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif}

    /* Header */
    header{
      padding:28px 0 20px;
      background:linear-gradient(#1b1b1b,#0f0f0f);
      color:#fff;
      text-align:center;
      border-bottom:1px solid #000;
    }
    header .brand{display:flex;align-items:center;justify-content:center;gap:12px}
    header .brand img{height:56px;width:56px;border-radius:50%;background:#fff}
    header h1{margin:2px 0 4px;font-size:22px}
    header .sub{color:#cfcfcf}

    /* Layout */
    .wrap{max-width:1100px;margin:18px auto;padding:0 16px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .tab{padding:9px 14px;border:1px solid #333;border-radius:12px;background:#1a1a1a;color:#fff;cursor:pointer}
    .tab.active{background:#fff;color:#111;border-color:#fff}
    .tabpane[hidden]{display:none}

    /* Cards / rows */
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:14px}
    .row{display:flex;gap:10px;align-items:center}
    .row.wrap{flex-wrap:wrap}
    .space{height:12px}

    /* Controls */
    input,select{background:#fff;border:1px solid var(--line);color:var(--ink);padding:10px 12px;border-radius:12px;width:100%}
    .btn{padding:9px 12px;border-radius:12px;border:1px solid var(--ink);background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
    .pill{padding:2px 8px;border-radius:999px;border:1px solid var(--ink);background:#fff;margin-left:8px}
    .muted{color:var(--muted)}

    /* Menu list */
    #menuList .btn{margin:6px}

    /* ====== Payment Modal (ไม่แตะธีมหลัก) ====== */
    .pos-pay-modal{
      position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.6);
      z-index:50;padding:16px;
    }
    .pos-pay-modal.show{display:grid}
    .pos-pay-panel{
      width:min(860px,100%);background:#fff;border-radius:16px;border:1px solid #ddd;padding:16px 16px 12px;
      box-shadow:0 20px 70px rgba(0,0,0,.28)
    }
    .pos-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .pos-title h3{margin:0}
    .pos-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .pos-items{max-height:220px;overflow:auto;border:1px solid #eee;border-radius:12px}
    .pos-items table{width:100%;border-collapse:collapse}
    .pos-items th,.pos-items td{padding:8px;border-bottom:1px dashed #efefef;text-align:left}
    .pos-qr{display:none;border:1px dashed #ddd;padding:8px;border-radius:12px;align-items:center;gap:12px}
    .pos-qr img{width:140px;height:140px;object-fit:contain;background:#fff;border:1px solid #eee;border-radius:8px}
    .pos-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}
    .danger{border-color:#c62828;color:#c62828;background:#fff}
  </style>
</head>
<body>

  <!-- ===== Header (คงธีมเดิม) ===== -->
  <header>
    <div class="brand">
      <img src="LOGO NACHAT.png" alt="Nachat Logo" onerror="this.style.display='none'">
      <h1>ณฉัตร | Nachat – POS</h1>
    </div>
    <div class="sub">หมูกระทะชุดละ 299 + Add-on & เครื่องดื่ม | สรุปรายงานรายวัน / สัปดาห์ / เดือน</div>
  </header>

  <div class="wrap">
    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="#pos">รับออเดอร์</button>
      <button class="tab" data-tab="#open">โต๊ะ/บิล</button>
      <button class="tab" data-tab="#reports">รายงานขาย</button>
      <button class="tab" data-tab="#settings">ตั้งค่าร้าน</button>
    </div>

    <!-- ===== POS TAB ===== -->
    <section id="pos" class="tabpane">
      <div class="card">
        <div class="row wrap">
          <div style="flex:1 1 220px">
            <label class="muted">โต๊ะ</label>
            <input id="inpTable" placeholder="เช่น N1" />
          </div>
          <div style="flex:1 1 220px">
            <label class="muted">พนักงาน</label>
            <input id="inpStaff" placeholder="เช่น น้ำชา" />
          </div>
          <div style="flex:0 0 140px;align-self:end">
            <button class="btn primary" id="btnOpenBill">เปิดบิล</button>
          </div>
        </div>
      </div>

      <div class="space"></div>

      <!-- เมนูอาหาร/เครื่องดื่ม -->
      <div class="card">
        <h3 style="margin:0 0 8px">เมนู</h3>
        <div id="menuList"></div>
      </div>

      <div class="space"></div>

      <!-- ตะกร้า -->
      <div class="card">
        <h3 style="margin:0 0 8px">ตะกร้า</h3>
        <div id="cartList" class="muted">ยังไม่มีรายการ</div>
        <div class="row" style="margin-top:10px">
          <div class="pill">รวม: <b id="cartTotal">0</b> บาท</div>
          <div style="flex:1"></div>
          <button class="btn" id="btnClearCart">ล้างตะกร้า</button>
        </div>
      </div>
    </section>

    <!-- ===== OPEN BILLS TAB ===== -->
    <section id="open" class="tabpane" hidden>
      <div class="card">
        <h3 style="margin:0 0 8px">บิลที่เปิดอยู่</h3>
        <div id="openBills" class="muted">ยังไม่มีบิลที่เปิดอยู่</div>
      </div>
    </section>

    <!-- ===== REPORTS TAB (เปล่า ๆ ไว้ก่อน) ===== -->
    <section id="reports" class="tabpane" hidden>
      <div class="card">
        <h3 style="margin:0 0 8px">รายงานขาย</h3>
        <div class="muted">จะเติมภายหลัง</div>
      </div>
    </section>

    <!-- ===== SETTINGS TAB (เปล่า ๆ ไว้ก่อน) ===== -->
    <section id="settings" class="tabpane" hidden>
      <div class="card">
        <h3 style="margin:0 0 8px">ตั้งค่าร้าน</h3>
        <div class="muted">กำหนดค่าใน localStorage ตามคู่มือ (POS_SHOPINFO)</div>
      </div>
    </section>
  </div>

  <!-- ===== Payment Modal (Cash / โอน + QR + พิมพ์) ===== -->
  <div id="pos-pay-modal" class="pos-pay-modal" aria-hidden="true">
    <div class="pos-pay-panel" role="dialog" aria-modal="true">
      <div class="pos-title">
        <h3>ปิดบิล</h3>
        <button class="btn" id="pos-pay-close">ปิด</button>
      </div>

      <div class="row wrap" style="margin-bottom:8px">
        <div style="flex:1 1 160px">
          <label class="muted">โต๊ะ</label>
          <input id="pos-pay-table" disabled>
        </div>
        <div style="flex:1 1 160px">
          <label class="muted">พนักงาน</label>
          <input id="pos-pay-staff" disabled>
        </div>
        <div style="flex:1 1 160px">
          <label class="muted">ยอดรวม</label>
          <input id="pos-pay-total" disabled>
        </div>
      </div>

      <div class="pos-grid">
        <!-- รายการ -->
        <div class="pos-items" style="grid-column:1 / 4">
          <table>
            <thead>
              <tr><th>สินค้า</th><th style="text-align:center">จำนวน</th><th style="text-align:right">รวม</th></tr>
            </thead>
            <tbody id="pos-pay-items">
              <!-- app.js จะเติม <tr> -->
            </tbody>
          </table>
        </div>

        <!-- วิธีชำระ -->
        <div>
          <label class="muted">วิธีชำระ</label>
          <select id="pos-pay-method">
            <option value="cash">เงินสด (Cash)</option>
            <option value="transfer">โอน (พร้อมเพย์)</option>
          </select>
        </div>
        <div>
          <label class="muted">รับเงินมา (บาท)</label>
          <input id="pos-pay-receive" type="number" inputmode="decimal" />
        </div>
        <div>
          <label class="muted">เงินทอน</label>
          <input id="pos-pay-change" disabled />
        </div>

        <!-- QR แสดงเมื่อเลือกโอน -->
        <div id="pos-qr-wrap" class="pos-qr" style="grid-column:1 / 4">
          <img id="pos-qr-img" alt="QR">
          <div>
            <div class="muted" style="margin-bottom:6px">สแกนโอน/บันทึกสลิปได้เลย</div>
            <button class="btn" id="pos-btn-view-slip">ดูสลิป/พิมพ์</button>
          </div>
        </div>
      </div>

      <div class="pos-actions">
        <button class="btn danger" id="pos-btn-void">ยกเลิกบิล</button>
        <button class="btn primary" id="pos-btn-pay">ปิดบิล</button>
      </div>
    </div>
  </div>

  <!-- Tabs handler (เล็กๆ) -->
  <script>
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tabpane').forEach(p=>p.hidden=true);
        document.querySelector(btn.dataset.tab).hidden=false;
      });
    });
  </script>

  <!-- โหลดสคริปต์หลัก -->
  <script src="app.js"></script>
</body>
</html>
